<!DOCTYPE html>
 <html>
  <head>
    <meta charset="UTF-8">
    <script
	    src="https://code.jquery.com/jquery-3.3.1.min.js"
	    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	    crossorigin="anonymous"></script>
  </head>
  <body>
    <h1>krey.is status checks</h1>
    <p id="krey.is"><a href="https://krey.is">krey.is</a>: checking status...</p>
    <p id="plex.krey.is"><a href="https://plex.krey.is">krey.is</a>: checking status...</p>
    <p id="dl.krey.is"><a href="https://dl.krey.is">krey.is</a>: checking status...</p>
    <p id="cloud.krey.is"><a href="https://cloud.krey.is">krey.is</a>: checking status...</p>
    <p id="vault.krey.is"><a href="https://vault.krey.is">krey.is</a>: checking status...</p>
    <p id="cockpit.krey.is"><a href="https://cockpit.krey.is">krey.is</a>: checking status...</p>
  </body>
</html>

<script>
    $(function() {
        function testURL(url) {
            $.ajax({
                url: 'https://' + url,
                type: 'GET',
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                },
                timeout: 3000, // timeout after 3 seconds
                success: function() {
                    document.getElementById(url).innerHTML = '<p id="' + url + '"><a href="https://' + url + '">' + url + '</a> status: online</p>';
                },
                error: function(res) {
                    console.log(res)
                    document.getElementById(url).innerHTML = '<p id="' + url + '"><a href="https://' + url + '">' + url + '</a> status: offline</p>';
                },
            })
        }

        // Test urls
        testURL('krey.is');
        testURL('plex.krey.is');
        testURL('dl.krey.is');
        testURL('cloud.krey.is');
        testURL('vault.krey.is');
        testURL('cockpit.krey.is');
  });
</script>
